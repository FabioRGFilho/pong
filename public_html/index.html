<!DOCTYPE html>
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body style="width: 100vw; height: 100vh; background-color: black; margin: 0px !important; padding: 0px; overflow: hidden;">
        <div id="bar1" class="bar" style="position: absolute;"></div>
        <div id="bar2" class="bar" style="position: absolute;"></div>
        <div id="ball" style="border-radius:100%; position: absolute;"></div>
        <div id="p1" style="position: absolute; font-size: 30pt; background-color: black; color:white"></div>
        <div id="p2" style="position: absolute; font-size: 30pt; background-color: black; color:white;"></div>
        <script
            src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
        <script>

            var barW = 15;
            var barH = 120;

            var w = $("body").width();
            var h = $("body").height();

            var leftM = 15;

            var point1 = 0;
            var point2 = 0;

            $("#p1").html('0');
            $("#p2").html('0');

            $("#p1").css("margin-left", w / 2 - 100);
            $("#p2").css("margin-left", w / 2 + 100);

            var rad = 30;

            var ballSpd = 10;

            var xSpd;
            var ySpd;

            var ball = $("#ball");

            var bar1 = $("#bar1");
            var bar2 = $("#bar2");
            var bars = $(".bar");

            var updates = 10;

            var keys = {
                'W': false,
                'S': false,
                'r_up': false,
                'r_down': false
            }

            bars.css("margin-top", h / 2 - barH / 2)

            $("div").css("background-color", "white");
            bars.width(barW);
            bars.height(barH);

            $("#p1").css("background-color", 'black');
            $("#p2").css("background-color", 'black');

            ball.css("width", rad + "px");
            ball.css("height", rad + "px");



            bar1.css('margin-left', (leftM) + 'px');
            bar2.css('margin-left', (w - leftM - barW) + 'px');

            startBall();

            function startBall() {

                ball.css("margin-left", w / 2 - rad / 2);
                ball.css("margin-top", h / 2 - rad / 2);

                var ang = Math.random() * (Math.PI / 180) * 45;
                var sX = Math.round((Math.random())) * 2 - 1;
                var sY = Math.round((Math.random())) * 2 - 1;


                xSpd = Math.round(Math.cos(ang) * sX * ballSpd);
                ySpd = Math.round(Math.sin(ang) * sY * ballSpd);

            }


            $(document).bind("keydown", clicked);
            $(document).bind("keyup", released);

            function clicked(e) {
                var code = e.keyCode || e.which;


                switch (code) {
                    case 38:
                        keys['r_up'] = true;
                        break;
                    case 40:
                        keys['r_down'] = true;
                        break;
                    default:
                        keys[String.fromCharCode(code)] = true;
                        break;
                }


            }






            function released(e) {
                var code = e.keyCode || e.which;


                switch (code) {
                    case 38:
                        keys['r_up'] = false;
                        break;
                    case 40:
                        keys['r_down'] = false;
                        break;
                    default:
                        keys[String.fromCharCode(code)] = false;
                        break;
                }


            }

            setInterval(update, updates);

            function update() {

                w = $("body").width();
                h = $("body").height();
                updateMoves();

                updateBall();
            }

            function updateBall() {


                var x = getX(ball);
                var y = getY(ball);

                ball.css("margin-left", x + xSpd);
                ball.css("margin-top", y + ySpd);

            }






            function updateMoves() {
                if (keys['W']) {
                    var y = bar1.css("margin-top");
                    y = y.replace("px", "");
                    y = y - 0;

                    if (y > 5)
                        bar1.css("margin-top", y - 5);
                }
                if (keys['S']) {
                    var y = bar1.css("margin-top");
                    y = y.replace("px", "");
                    y = y - 0;
                    if (y + barH < h - 5)
                        bar1.css("margin-top", y + 5);
                }
                if (keys['r_up']) {
                    var y = bar2.css("margin-top");
                    y = y.replace("px", "");
                    y = y - 0;
                    if (y > 5)
                        bar2.css("margin-top", y - 5);
                }
                if (keys['r_down']) {
                    var y = bar2.css("margin-top");
                    y = y.replace("px", "");
                    y = y - 0;
                    if (y + barH < h - 5)
                        bar2.css("margin-top", y + 5);
                }
                colide();
            }

            function getY(obj) {

                return obj.css("margin-top").replace("px", "") - 0;

            }

            function getX(obj) {

                return obj.css("margin-left").replace("px", "") - 0;
            }
            var insideL = false;
            var insideR = false;
            function colide() {

                if (getX(ball) <= getX(bar1) + barW) {
                    if (!insideL) {

                        if (getY(ball) >= getY(bar1) - 5 && getY(ball) <= getY(bar1) + barH + 5) {
                            insideL = true;
                            xSpd = -xSpd;

                            toc();
                        }
                    }
                } else
                    insideL = false;
                if (getX(ball) + rad >= getX(bar2)) {
                    if (!insideR) {
                        if (getY(ball) >= getY(bar2) - 5 && getY(ball) <= getY(bar2) + barH + 5) {
                            insideR = true;
                            xSpd = -xSpd;
                            toc();
                        }
                    }
                } else
                    insideR = false;
                if (getX(ball) < 0) {
                    point1++;
                    $("#p1").html(point1);
                    startBall();




                }
                if (getY(ball) < 0) {
                    ySpd = -ySpd;
                }
                if (getX(ball) > w - 10) {
                    point2++;
                    $("#p2").html(point2);
                    startBall();
                }
                if (getY(ball) > h - rad) {
                    ySpd = -ySpd;
                }

            }
            </script>
    </body>
</html>